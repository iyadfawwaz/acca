<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุชุณุฌูู ุงูุฏุฎูู</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
</head>
<body>
    <div class="login-container">
        <form id="loginForm" class="login-form">
            <h2>ุชุณุฌูู ุงูุฏุฎูู</h2>
            <div class="input-group">
                <label for="email">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
                <input type="email" id="email" required placeholder="example@mail.com">
            </div>
           <div class="input-group">
    <label for="password">ูููุฉ ุงููุฑูุฑ</label>
    <div style="position: relative;">
        <input type="password" id="password" required>
        <span id="togglePassword" style="position: absolute; left: 10px; top: 30%; cursor: pointer;">๐๏ธ</span>
    </div>
</div>

            <button type="submit" class="login-btn">ุฏุฎูู</button>
            <p class="message">ููุณ ูุฏูู ุญุณุงุจุ <a href="#">ุฅูุดุงุก ุญุณุงุจ</a></p>
        </form>
    </div>
    <script src="cdn.jsdelivr.net"></script>


    <!-- ุงุณุชุฏุนุงุก Firebase App ู Auth (ูุณุฎุฉ Modular 2026) -->
<script type="module">
  import { initializeApp } from  "https://www.gstatic.com/firebasejs/12.7.0/firebase-app.js";
  import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";
  /*
    const firebaseConfigx = {
  apiKey: "AIzaSyC0esGNBo2_2w4JucRans9zBZulhgTAbb0",
  authDomain: "sy-iyad.firebaseapp.com",
  databaseURL: "https://sy-iyad-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "sy-iyad",
  storageBucket: "sy-iyad.firebasestorage.app",
  messagingSenderId: "873740808897",
  appId: "1:873740808897:web:f1c636369a510256e41a40",
  measurementId: "G-7VLX9WHL3H"
};
*/
    const firebaseConfig = {
  apiKey: "AIzaSyA8Wo9SVYsIfkXoP5shUz7d45ysTp8qOWw",
  authDomain: "iconic-indexer-315711.firebaseapp.com",
  databaseURL: "https://iconic-indexer-315711-default-rtdb.europe-west1.firebasedatabase.app",
  projectId: "iconic-indexer-315711",
  storageBucket: "iconic-indexer-315711.firebasestorage.app",
  messagingSenderId: "971689870803",
  appId: "1:971689870803:web:d8c88e5b067cfff5b6db26",
  measurementId: "G-ZZ5F52WXYY"
};

  // ุชููุฆุฉ Firebase
  const app = initializeApp(firebaseConfigx);
  const auth = getAuth(app);

  import { onAuthStateChanged } from "https://www.gstatic.com/firebasejs/12.7.0/firebase-auth.js";

// ุงูุชุญูู ูู ุญุงูุฉ ุงููุณุชุฎุฏู ุนูุฏ ุชุญููู ุงูุตูุญุฉ
onAuthStateChanged(auth, (user) => {
  if (user) {
    localStorage.setItem("userId",user.uid);
    // ุฅุฐุง ูุงู ุงููุณุชุฎุฏู ูุณุฌูุงู ุฏุฎููู ุจุงููุนูุ ูููู ููุฑุงู ูุตูุญุฉ ุงูุฏุงุดุจูุฑุฏ
    Swal.fire({
    title: 'ุฌุงุฑู ุงูุชุญูู...',
    allowOutsideClick: false,
    didOpen: () => {
      Swal.showLoading();
    }
  });
    window.location.href = "./a/b/c/pl.m.html"; 
  } else {
    // ุงููุณุชุฎุฏู ุบูุฑ ูุณุฌูุ ุงุชุฑู ุงูุตูุญุฉ ููุง ูู ููููู ุจุชุณุฌูู ุงูุฏุฎูู
     Swal.fire({
    title:"ูุง ููุฌุฏ ูุณุชุฎุฏู ูุดุท.",
    allowOutsideClick: false,
    didOpen: () => {
      Swal.showLoading();
    },
    timer:3000
  });
  
  }
});


  // ุฑุจุท ูููุฐุฌ ุชุณุฌูู ุงูุฏุฎูู
  const loginForm = document.getElementById('loginForm');
  loginForm.addEventListener('submit', (e) => {
    e.preventDefault();
     Swal.fire({
    title: 'ุฌุงุฑู ุงูุชุญูู...',
    allowOutsideClick: false,
    didOpen: () => {
      Swal.showLoading();
    },
    timer:3000
  });
    const email = document.getElementById('email').value;
    const password = document.getElementById('password').value;

    signInWithEmailAndPassword(auth, email, password)
      .then((userCredential) => {
        // ูุฌุงุญ ุชุณุฌูู ุงูุฏุฎูู
        const user = userCredential.user;
        Swal.fire({
    title: 'logged in '+user,
    allowOutsideClick: false,
    didOpen: () => {
      Swal.showLoading();
    },
    timer:3000
  });
        window.location.href = "./a/b/c/pl.m.html"; // ุงูุชูุฌู ูุตูุญุฉ ุงููุณุชุฎุฏู
      })
      .catch((error) => {
        // ูุดู ุชุณุฌูู ุงูุฏุฎูู
        const errorMessage = error.message;
         Swal.fire({
    title: 'error '+errorMessage,
    allowOutsideClick: false,
    didOpen: () => {
      Swal.showLoading();
    },
    timer:3000
  });
      });
  });
</script>

    <script src="script.js"></script>
</body>
</html>
